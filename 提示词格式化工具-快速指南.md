# 提示词格式化工具 - 快速指南

## 快速开始

### 1. 基本使用

```bash
# 最简单的用法
python format_prompt_text.py your_prompt.txt
```

这会：
- 读取 `your_prompt.txt`
- 生成 `your_prompt_formatted.txt`
- 包含所有三种格式的输出

### 2. 指定字段

```bash
# 格式化 system_prompt
python format_prompt_text.py prompt.txt output.txt --field system_prompt

# 格式化 post_history_prompt
python format_prompt_text.py prompt.txt output.txt --field post_history_prompt
```

### 3. 选择输出格式

```bash
# 只输出 JSON 格式
python format_prompt_text.py prompt.txt output.txt --format json

# 只输出字段赋值格式（推荐）
python format_prompt_text.py prompt.txt output.txt --format field

# 只输出直接粘贴格式
python format_prompt_text.py prompt.txt output.txt --format paste
```

## 三种格式的用途

### 格式 1: JSON 字符串
**用途**: 直接复制到 JSON 文件的字段值中

```json
{
  "system_prompt": "# 系统核心指令\n\n## 角色定位\n..."
}
```

### 格式 2: 字段赋值格式 ⭐推荐⭐
**用途**: 直接复制到角色卡 JSON 的对应字段

```json
"system_prompt": "# 系统核心指令\n\n## 角色定位\n..."
```

### 格式 3: 直接粘贴格式
**用途**: 在支持多行文本的编辑器中直接粘贴（保持换行）

## 使用场景

### 场景 1: 从文本文件转换

1. 准备您的提示词文本文件（`.txt`）
2. 运行脚本：
   ```bash
   python format_prompt_text.py system_prompt.txt
   ```
3. 打开生成的 `system_prompt_formatted.txt`
4. 复制"格式 2"的内容
5. 粘贴到角色卡 JSON 的 `system_prompt` 字段

### 场景 2: 批量处理

```bash
# 处理 system_prompt
python format_prompt_text.py system_prompt.txt sys_output.txt --field system_prompt --format field

# 处理 post_history_prompt
python format_prompt_text.py post_history.txt post_output.txt --field post_history_prompt --format field
```

### 场景 3: 处理中文文件（GBK 编码）

```bash
python format_prompt_text.py prompt.txt output.txt --encoding gbk
```

## 常见问题

**Q: 如何知道应该用哪种格式？**

A: 
- 如果直接编辑 JSON 文件 → 使用格式 1（JSON 字符串）
- 如果复制到角色卡 JSON → 使用格式 2（字段赋值格式）⭐推荐
- 如果在编辑器中编辑 → 使用格式 3（直接粘贴格式）

**Q: 输出文件在哪里？**

A: 如果未指定输出文件，会在输入文件同目录下生成 `原文件名_formatted.txt`

**Q: 可以处理多长的文本？**

A: 没有限制，可以处理任意长度的文本文件

## 完整示例

```bash
# 1. 准备文本文件 system_prompt.txt

# 2. 运行脚本
python format_prompt_text.py system_prompt.txt formatted.txt --field system_prompt

# 3. 查看输出文件 formatted.txt

# 4. 复制"格式 2"的内容

# 5. 粘贴到角色卡 JSON
```

## 提示

- ✅ 脚本会自动处理所有特殊字符转义
- ✅ 支持 Unicode 字符（包括 emoji）
- ✅ 自动处理换行符
- ✅ 保持原始文本格式
